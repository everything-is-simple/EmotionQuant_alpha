# PAS — 风险评估

---

## 总体风险等级：极高

PAS 是三大核心算法中偏差最严重的模块。8 项 P0 意味着三因子评分体系几乎需要完整重写。

---

## 关键风险判断

### 三因子公式全部偏离（极高风险）

- **牛股基因**：权重错误 + max_pct_chg 计算完全不同 → 评分分布偏移
- **结构位置**：缺失 30% 权重的 trend_continuity → 丧失趋势延续维度
- **行为确认**：涨停确认信号被替换为趋势连涨 → 丧失量价确认维度
- **三因子同时错误 → pas_score 不可信 → 从 PAS 到 Trading 的整条链路不可信**

### 数据源缺失（高风险）

- turnover_rate 近似导致自适应窗口选择偏差 — 大盘股系统性选错窗口
- 涨停推断不准导致牛股基因因子和行为因子同时受影响

### 保留价值

代码中的**向量化计算架构**（pivot-based rolling, _vec_zscore 等）是高质量工程实现，OOP 重建时应保留。问题仅在于算法逻辑偏离设计，工程架构本身无误。

---

## 风险优先级排序

1. **PAS-P1-01 + P1-02** — 数据源补齐（后续修复的前置依赖）
2. **PAS-P0-03 + P0-04 + P0-05** — 结构因子恢复 trend_continuity + 行为因子恢复 limit_up_flag（必须同步修改）
3. **PAS-P0-06** — volume_quality 恢复完整计算（依赖 P1-01）
4. **PAS-P0-01 + P0-02** — 牛股基因权重和计算修正
5. **PAS-P0-07 + P0-08** — breakout_ref 窗口化 + 突破强度简化
6. **PAS-P2-*  ** — 输出模型补全
7. **PAS-P3-*  ** — docstring + baseline
