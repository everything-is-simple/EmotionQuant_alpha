# SOS — 系统代码与核心设计的差异急救方案（Validation 篇）

**创建日期**: 2026-02-27
**状态**: 🔴 待审阅 → 待决策 → 待执行
**涉及设计文档版本**: v2.2.0 (2026-02-14)
**涉及代码路径**: `src/algorithms/validation/`

---

## 目录结构

| 文件 | 内容 |
|------|------|
| `README.md` | 本文件：总览与决策入口 |
| `01-gap-inventory.md` | 完整差异清单（13项 🔴 + 2项 🟡） |
| `02-risk-assessment.md` | 每项差异的业务风险与技术债评估 |
| `03-remediation-plan.md` | 修复方案：分级、分批、可执行的急救路线 |

---

## 差异严重度总览

| 严重度 | 数量 | 关键词 |
|--------|------|--------|
| 🔴 根本性偏离 | 11 | Config阈值5倍偏差、因子枚举全缺、因子验证逻辑错位、Regime分类反转、WFA纸上谈兵、5张表结构全偏、API结构全偏、Gate fallback语义错 |
| 🟡 次要偏离 | 2 | 产物路径、baseline权重微偏 |

## 核心矛盾一句话

> 设计是一个 **多因子截面验证 + 真实双窗口WFA回测** 系统；
> 代码是一个 **启发式相关系数代理 + 公式估算** 的简化评估。
> 两者之间不是"微调可修复"的偏差，而是**架构级的断裂**。

---

## 决策项（待讨论）

在审阅完详细文档后，需要就以下问题做出决策：

1. **方向选择**：以设计为准补代码？还是以代码现状为准修设计？还是折中（分阶段对齐）？
2. **优先级排序**：13项差异中哪些必须本轮修复、哪些可延后？
3. **修复策略**：是否允许引入中间状态（如设计标注 MVP 标签、代码标注 TODO）？
4. **测试兜底**：现有测试是否足以覆盖修复后的回归风险？
