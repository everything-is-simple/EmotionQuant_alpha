# MSS — 风险评估

---

## 总体风险等级：中

MSS 核心算法正确，风险主要来自文档误导和长期统计偏移。

---

## 逐项风险分析

### MSS-P0-1/P0-2/P0-3：information-flow 文档三处矛盾（高文档风险）

- **业务影响**: 不直接影响当前系统运行（代码是对的），但会误导后续开发。如果新开发者按 information-flow 实现功能（如"使用前一日数据"的回退策略），将违反系统安全约束。
- **技术风险**: 低——修改文档，不碰代码。
- **紧迫性**: 在 OOP 重建之前必须修，否则重建时会按错误文档实现。

### MSS-P1-1：Z-Score Baseline 硬编码（中长期风险）

- **业务影响**: 硬编码的 mean/std 基于经验估计，不是历史统计。如果真实市场的因子分布偏离这些值（如牛市中 profit_effect 均值远高于 0.08），Z-Score 归一化会系统性偏移，温度读数失真。
- **技术风险**: 中。需要实现 parquet 加载 + 滚动更新机制。
- **紧迫性**: 短期可接受（硬编码值在温和市场下大致合理），长期是真实风险。

### MSS-P1-2：输入验证松（中风险）

- **业务影响**: 如果数据层 P0 错误导致 rise_count > total_stocks 等不合理数据，MSS 会静默产出不合理的因子值。
- **技术风险**: 低。添加几行断言检查。
- **紧迫性**: 在数据层 P0 修复前是高风险（脏数据会流入），修复后降为低风险。

### MSS-P2/P3 项（低风险）

- P2-1 类型注解：不影响运行，影响静态分析
- P2-2 数据模型字段：代码比设计更完整，反向更新即可
- P3-1~P3-5：均为文档补充或枚举实现，无运行风险

---

## 风险优先级排序

1. **MSS-P0-1/P0-2/P0-3** — 重写 information-flow 三个章节（防止 OOP 重建时按错误文档实现）
2. **MSS-P1-2** — 补输入验证（特别是"必备字段缺失"场景）
3. **MSS-P2-1** — 修返回类型注解（1 行）
4. **MSS-P2-2** — 更新数据模型文档
5. **MSS-P1-1** — 实现 parquet baseline 加载（与 OOP 重建合并做）
6. **MSS-P3-*  ** — 预警规则、枚举、字段去留等
