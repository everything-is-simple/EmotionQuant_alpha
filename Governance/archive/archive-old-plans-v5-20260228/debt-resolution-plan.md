# 技术债务全部解决方案

**版本**: v1.0  
**更新时间**: 2026-02-19  
**目标**: 3-4周内解决全部9项技术债务

---

## 执行路径（4周）

### Week 1: P0 + P1 债务（5项）

**Day 1-2: TD-S3A-014（P0）DuckDB 锁恢复**
- 实现：有限等待 + 重试 + 锁持有者记录
- 测试：并发写入压力测试
- 产物：锁恢复证据链

**Day 3-4: TD-S0-006（P1）SW 行业映射**
- 实现：L2 行业快照接入申万31个一级行业
- 重构：IRS 从全市场聚合改为行业粒度
- 测试：行业映射回归测试

**Day 5-7: TD-S0-004（P1）一字板/流动性**
- 方案A：用收盘价=涨停价判定（无需分钟数据）
- 方案B：预留分钟级数据接口（未来扩展）
- 测试：极端场景回归测试

### Week 2: P2 债务（4项）+ S3b 归因

**Day 1-2: TD-S0-002（P2）Validation 统计校准**
- 依赖：S3b 归因数据
- 实现：IC/ICIR/RankIC 真实收益口径对齐
- 测试：因子验证回归测试

**Day 3-4: TD-S1-008（P2）探针收益口径**
- 依赖：回测数据
- 实现：用真实收益序列替代温度变化
- 测试：探针有效性验证

**Day 5-7: S3b 归因验证（生死门）**
- 实现：A/B/C 对照 + 偏差分解
- 门禁：情绪主线必须优于随机选股
- 决策：PASS → Week 3，FAIL → 回退 S2c

### Week 3: P2 债务（2项）+ S4b

**Day 1-2: TD-S1-007（P2）MSS 自适应阈值**
- 实现：分位数阈值（T30/T45/T60/T75）
- 测试：极端行情周期判定回归

**Day 3-4: TD-GOV-012（P2）DESIGN_TRACE 全覆盖**
- 实现：Data Layer/GUI/Analysis 补齐溯源标记
- 测试：设计溯源自动检查

**Day 5-7: S4b 极端防御**
- 实现：连续跌停 + 流动性枯竭场景
- 测试：压力场景回放验证

### Week 4: P2 债务（2项）+ S5 GUI

**Day 1-2: TD-S0-005（P2）历史措辞清理（已清偿）**
- 实现：全仓文档搜索替换（Spiral 口径统一）
- 测试：文档一致性检查

**Day 3-4: TD-S3A-015（P2）AK/Bao 适配**
- 实现：AKShare/BaoStock 适配器
- 测试：数据源降级测试

**Day 5-7: S5 GUI 最小可用**
- 实现：只读展示 + 日报导出
- 测试：GUI 启动回归测试

---

## 关键决策点

### S3b 归因验证（Week 2 Day 7）

**IF 情绪主线优于随机选股：**
- ✅ 继续 Week 3-4
- ✅ 系统可信赖

**IF 情绪主线不优于随机选股：**
- ❌ 立即停止
- ❌ 回退 S2c 重新校准算法
- ❌ 不继续推进

---

## 资源需求

**人力**: 1人全职
**时间**: 4周（28天）
**风险缓冲**: 预留5天

---

## 成功标准

**全部9项债务状态 = 已清偿**
**生产可用性 = 95%+**
**S3b 归因验证 = PASS**
